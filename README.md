# TASON

TASON (Typed Another Scriptable Object Notation) 是一种类型化的对象表示语法，可以用于序列化和反序列化数据。


## 特性

1. TASON和JSON5几乎完全兼容，对于熟悉JSON/JSON5/JavaScript对象字面量语法的开发者来说，使用起来非常方便。
2. TASON支持带类型序列化，可以序列化任何类型的对象，包括自定义类型，语法和使用数据库管理工具查看BSON时所用的格式类似。
3. TASON是语言无关的，TASON类型的具体实现取决于所使用的语言

## 基本类型

涵盖了JSON5中的基本类型

* `null`
* boolean: `true`或`false`
* number: 64位浮点数
  * ✅ 十进制整数和小数
  * ✅ `0x`十六进制
  * ✅ `0o`八进制
  * ✅ `0b`二进制
  * ✅ 科学计数法
  * ✅ `NaN`,`Infinity`, `-Infinity`
  * ✅ .01和10.
* string: 字符串
  * ✅ 单引号
  * ✅ 双引号
  * ✅ 不转义的Unicode字符
  * ✅ `\uXXXX` Unicode字符转义
  * ✅ `\xXX` 十六进制转义
  * ✅ `\b \f \n \r \t \v \0 \' \"`
  * ⚠️ js支持 `\u{XXXX}` 形式的Unicode字符转义，但这和`\uXXXX`作用完全相同并且更长，故被排除以简化语法
  * ❌ 不支持转义行尾换行符，从而让字符串跨域多行。TASON主要面向数据传输而不是配置文件，在跨平台情况下检查换行符采用的是CRLF还是LF十分困难
  * ❌ 不支持转义`/`，在大部分语言中正斜杠都无需转义
* array: 数组
  * ✅ 可以有尾随逗号
  * ✅ 支持各种可迭代对象。例如在JavaScript中指`Iterable<T>`， C#中指`IEnumerable<T>`
* object: 对象字面量
  * ✅ 可以有尾随逗号
  * ✅ 属性名可以是符合 `[a-zA-Z_][a-zA-Z0-9_]*` 的标识符
  * ✅ 属性名可以是字符串
  * ⚠️ 不支持以`$`开头的标识符，因为很多语言如C#的标识符不能以`$`开头
  * ❌ 不支持将其他合法的Unicode字符（包括汉字）作为标识符，容易造成混淆，并且非字母数字的标识符很少作为属性名

## TASON类型实例

TASON类型包括两大类：标量类型(Scalar)和对象类型(Object)。

### 标量类型

类似GraphQL中的Scalar，代表了一种不会被细分的基元类型，比如各种整数、浮点数、日期时间、正则表达式、UUID等。

* 标量类型使用代表值的字符串进行构造，如`RegExp("/^[A-Z0-9_]+$/i")`，`Int64("0x1234ABCDEF")`
* 可以创建自己的标量类型，并且标量类型不受类型的复杂程度限制。例如可以创建一个名为`JSON`的标量类型，使用`JSON.stringify()`和`JSON.parse()`进行序列化和反序列化一整个字符串
* 默认情况下，标量类型对应的类具有一个构造函数，接受一个代表值的字符串作为参数

### 对象类型

对象类型代表一种强类型化的对象，比如各种结构体、类、字典等。

* 对象类型使用对象字面量进行构造，如`Person({ name: "John", 'age': 30 })`
* 可以创建自己的对象类型。有两种常见的实现方式：
  * 类拥有一个无参构造函数，并在创建后再对对应的属性进行赋值
  * 对于动态语言如js来说，为了简化使用，对应的类的构造函数可以接受一个对象字面量作为参数，其中对象的每一个属性都是这个类的公共可写属性名
  * 在C#中record类型可以直接注册为对象类型，因为它通常具有类初始化器、复制构造函数等简化对象创建的方法
